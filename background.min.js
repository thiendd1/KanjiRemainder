function showNotification(){null==db&&openConnection(),db.kanjis.toCollection().count(function(n){if(0==n)parseDataFromCSV(csvF);else{list.length>=n&&(list=[]);for(var i=0;;){i=Math.floor(Math.random()*n)+1;$.inArray(i,list);if(-1==$.inArray(i,list)){list.push(i);break}}db.kanjis.get(i,function(n){if(void 0!=n){var i=new XMLHttpRequest;i.open("GET",textToImgURL+n.kanji),i.responseType="blob",i.onload=function(){var i=this.response;chrome.notifications.create("reminder",{type:"basic",iconUrl:window.URL.createObjectURL(i),title:n.kanji+"                                  (Lv: N"+n.type+")",message:n.hanviet.toUpperCase(),contextMessage:n.description.trim()+", "+n.description1})},i.send()}})}})}var strMin=min+"min",list=[];chrome.alarms.create(strMin,{delayInMinutes:min,periodInMinutes:min}),chrome.alarms.onAlarm.addListener(function(n){n.name===strMin&&showNotification()});
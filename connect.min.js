function openConnection(){db=new Dexie(dbName),db.version(1).stores({kanjis:"++id, kanji, hanviet, description, description1, type"}),db.open().catch(function(a){console.log("Uh oh : "+a)}),console.log("Database ready !")}function parseDataFromCSV(a){null==db&&openConnection(),db.kanjis.count(function(b){0==b?(console.log("Empty DB. Auto starting import data ..."),Papa.parse(a,{download:!0,complete:function(a){void 0!=a&&putData(a.data)}})):console.log("Data is ready !")})}function putData(a){if(a.length>0){null==db&&openConnection();var b=0,c=1,d=2,e=3,f=4,g=[];insertData=function(a,h){h>0&&g.push({kanji:a[b],hanviet:a[c],description:a[d],description1:a[e],type:a[f]})},a.forEach(insertData),db.kanjis.bulkAdd(g).then(function(){console.log("Import data success !")}).catch(function(a){console.log("Ooops: "+a)})}}function getItem(a){null==db&&openConnection(),db.kanjis.get(a,function(a){return a})}var db=null,filesInput;